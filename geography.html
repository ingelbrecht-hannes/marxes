
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geography - Marxes</title>
    <link href="/public/top/css_file/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/public/top/js_file/static/css/style.css">
    
<script src="/public/top/css_file/npm/tesseract.min.js"></script>

</head>
<body>
    <!-- Top bar -->
    <div class="top-bar">
    <a href="login.html" id="auth-link">Log in</a>
    <button id="logout-btn" style="display:none;" class="btn btn-link">Uitloggen</button>
</div>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo-area">
            <img src="/public/top/js_file/static/images/lion-logo.svg" alt="Lion Logo">
            <div class="logo-text">Marxes</div>
        </div>

        <div class="menu">
            <a href="marxes.html">Menu</a>
            <a href="math.html">Math</a>
            <a href="physics.html">Physics</a>
            <a href="chemistry.html">Chemistry</a>
            <a href="geography.html">Geography</a>
        </div>

        <div class="search-area">
            <div class="search">
                🔍 <input type="text" placeholder="Zoek" id="search-input">
            </div>
        </div>
    </nav>

    <!-- Main content -->
    <main>
        
<div class="container mt-4">
    <div class="subject-page">
        <h1>🌍 Geography AI Assistant</h1>
        <p class="lead">Explore world geography with AI - countries, capitals, climate, and geographical features!</p>
        
        <div class="row">
            <div class="col-md-8">
                <!-- Text input section -->
                <div class="card mb-4">
                    <div class="card-header bg-success text-white">
                        <h5>📝 Ask Geography Questions</h5>
                    </div>
                    <div class="card-body">
                        <textarea id="textInput" class="form-control mb-3" rows="4" placeholder="Ask your geography question here... (e.g., What is the capital of France? or Explain the climate of the Amazon rainforest)"></textarea>
                        <button onclick="solveTextGeography()" class="btn btn-success">
                            <span class="btn-text">Get Geography Answer</span>
                            <span class="spinner-border spinner-border-sm d-none" role="status"></span>
                        </button>
                    </div>
                </div>
                
                <!-- Image upload section -->
                <div class="card mb-4">
                    <div class="card-header bg-info text-white">
                        <h5>📷 Upload Geography Image</h5>
                    </div>
                    <div class="card-body">
                        <input type="file" accept="image/*" capture="environment" id="imageInput" class="form-control mb-3">
                        <button onclick="solveImageGeography()" class="btn btn-info">
                            <span class="btn-text">Analyze Geography Image</span>
                            <span class="spinner-border spinner-border-sm d-none" role="status"></span>
                        </button>
                    </div>
                </div>
                
                <!-- Results section -->
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5>🎯 Geography Answers</h5>
                    </div>
                    <div class="card-body">
                        <div id="output" class="solution-output">
                            Ready to answer your geography questions! Choose an input method above.
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-header">
                        <h6>🗺️ Interactive Tools</h6>
                    </div>
                    <div class="card-body text-center">
                        <a href="geography-map.html" class="btn btn-success mb-3" style="width: 100%;">
                            🌍 Interactive World Map
                        </a>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">
                        <h6>🌎 Country Facts</h6>
                    </div>
                    <div class="card-body">
                        <h6>Largest Countries by Area:</h6>
                        <ol class="small">
                            <li>Russia (17.1M km²)</li>
                            <li>Canada (10.0M km²)</li>
                            <li>China (9.6M km²)</li>
                            <li>United States (9.5M km²)</li>
                            <li>Brazil (8.5M km²)</li>
                        </ol>
                        
                        <h6>Most Populous Countries:</h6>
                        <ol class="small">
                            <li>China (1.4B)</li>
                            <li>India (1.4B)</li>
                            <li>United States (330M)</li>
                            <li>Indonesia (270M)</li>
                            <li>Pakistan (220M)</li>
                        </ol>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">
                        <h6>🌊 Oceans & Continents</h6>
                    </div>
                    <div class="card-body">
                        <h6>Major Oceans:</h6>
                        <ul class="list-unstyled small">
                            <li>🌊 Pacific Ocean (165.2M km²)</li>
                            <li>🌊 Atlantic Ocean (106.4M km²)</li>
                            <li>🌊 Indian Ocean (70.6M km²)</li>
                            <li>🌊 Arctic Ocean (14.1M km²)</li>
                        </ul>
                        
                        <h6>Seven Continents:</h6>
                        <ul class="list-unstyled small">
                            <li>🌏 Asia</li>
                            <li>🌍 Africa</li>
                            <li>🌎 North America</li>
                            <li>🌎 South America</li>
                            <li>🇪🇺 Europe</li>
                            <li>🦘 Australia</li>
                            <li>🐧 Antarctica</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">
                        <h6>🏔️ Geographic Features</h6>
                    </div>
                    <div class="card-body">
                        <h6>Highest Mountains:</h6>
                        <ul class="list-unstyled small">
                            <li>⛰️ Everest (8,849m)</li>
                            <li>⛰️ K2 (8,611m)</li>
                            <li>⛰️ Kangchenjunga (8,586m)</li>
                        </ul>
                        
                        <h6>Longest Rivers:</h6>
                        <ul class="list-unstyled small">
                            <li>🏞️ Nile (6,650km)</li>
                            <li>🏞️ Amazon (6,400km)</li>
                            <li>🏞️ Yangtze (6,300km)</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h6>💡 Geography Tips</h6>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled small">
                            <li>• Study maps regularly</li>
                            <li>• Learn country-capital pairs</li>
                            <li>• Understand climate zones</li>
                            <li>• Know major geographic features</li>
                            <li>• Connect geography to history</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    </main>

    <!-- Scripts -->
    <script src="/public/top/css_file/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/public/top/js_file/static/js/main.js"></script>
    
<script>
// Global variables
let isProcessing = false;

function setButtonLoading(button, loading) {
    const spinner = button.querySelector('.spinner-border');
    const text = button.querySelector('.btn-text');
    
    if (loading) {
        spinner.classList.remove('d-none');
        button.disabled = true;
        if (text) text.textContent = 'Processing...';
    } else {
        spinner.classList.add('d-none');
        button.disabled = false;
        if (text) text.textContent = button.onclick.includes('Text') ? 'Get Geography Answer' : 'Analyze Geography Image';
    }
}

async function solveTextGeography() {
    if (isProcessing) return;
    
    const input = document.getElementById('textInput').value.trim();
    const output = document.getElementById('output');
    const button = event.target;
    
    if (!input) {
        alert("Please enter a geography question!");
        return;
    }
    
    isProcessing = true;
    setButtonLoading(button, true);
    output.innerHTML = '<div class="alert alert-info">🔄 Finding geography information...</div>';
    
    try {
        const response = await fetch("/solve-geography", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ problem: input })
        });
        
        const data = await response.json();
        
        if (response.ok) {
            displaySolutions(data);
        } else {
            output.innerHTML = `<div class="alert alert-danger">❌ Error: ${data.error || 'Unknown error occurred'}</div>`;
        }
    } catch (err) {
        console.error('Error:', err);
        output.innerHTML = '<div class="alert alert-danger">❌ Network error. Please check your connection.</div>';
    } finally {
        isProcessing = false;
        setButtonLoading(button, false);
    }
}

async function solveImageGeography() {
    if (isProcessing) return;
    
    const fileInput = document.getElementById('imageInput');
    const output = document.getElementById('output');
    const button = event.target;
    
    if (!fileInput.files[0]) {
        alert("Please select or take a photo!");
        return;
    }
    
    isProcessing = true;
    setButtonLoading(button, true);
    output.innerHTML = '<div class="alert alert-info">📷 Extracting text from image...</div>';
    
    try {
        // OCR Processing
        const { data: { text } } = await Tesseract.recognize(fileInput.files[0], 'eng', {
            logger: m => {
                if (m.status === 'recognizing text') {
                    output.innerHTML = `<div class="alert alert-info">📷 Processing image... ${Math.round(m.progress * 100)}%</div>`;
                }
            }
        });
        
        if (!text.trim()) {
            output.innerHTML = '<div class="alert alert-warning">⚠️ Could not extract text from image. Try a clearer photo.</div>';
            return;
        }
        
        output.innerHTML = `<div class="alert alert-success">📷 Extracted question: <strong>${text.trim()}</strong></div><div class="alert alert-info">🔄 Finding geography information...</div>`;
        
        // Solve the extracted problem
        const response = await fetch("/solve-geography", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ problem: text.trim() })
        });
        
        const data = await response.json();
        
        if (response.ok) {
            displaySolutions(data);
        } else {
            output.innerHTML = `<div class="alert alert-danger">❌ Error: ${data.error || 'Unknown error occurred'}</div>`;
        }
        
    } catch (err) {
        console.error('Error:', err);
        output.innerHTML = '<div class="alert alert-danger">❌ Error processing image or finding answer.</div>';
    } finally {
        isProcessing = false;
        setButtonLoading(button, false);
    }
}

function displaySolutions(data) {
    const output = document.getElementById('output');
    
    let html = `
        <div class="problem-display mb-4">
            <h5>🌍 Geography Question:</h5>
            <div class="alert alert-light">${data.problem}</div>
        </div>
        <div class="solutions-display">
            <h5>🎯 AI Geography Answers:</h5>
    `;
    
    // Gemini Solution
    html += `
        <div class="card mb-3">
            <div class="card-header bg-primary text-white">
                <h6 class="mb-0">🔵 AI Geography Answer</h6>
            </div>
            <div class="card-body">
                <div class="solution-text" style="font-family: Arial, sans-serif;">${data.solutions.gemini}</div>
            </div>
        </div>
    `;
    
    html += '</div>';
    output.innerHTML = html;
}
</script>

</body>
</html>