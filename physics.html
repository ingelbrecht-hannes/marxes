
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics - Marxes</title>
    <link href="/public/top/css_file/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/public/top/js_file/static/css/style.css">
    
<script src="/public/top/css_file/npm/tesseract.min.js"></script>

</head>
<body>
    <!-- Top bar -->
<div class="top-bar">
    <a href="login.html" id="auth-link">Log in</a>
    <button id="logout-btn" style="display:none;" class="btn btn-link">Uitloggen</button>
</div>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo-area">
            <img src="/public/top/js_file/static/images/lion-logo.svg" alt="Lion Logo">
            <div class="logo-text">Marxes</div>
        </div>

        <div class="menu">
            <a href="marxes.html">Menu</a>
            <a href="math.html">Math</a>
            <a href="physics.html">Physics</a>
            <a href="chemistry.html">Chemistry</a>
            <a href="geography.html">Geography</a>
        </div>

        <div class="search-area">
            <div class="search">
                üîç <input type="text" placeholder="Zoek" id="search-input">
            </div>
        </div>
    </nav>

    <!-- Main content -->
    <main>
        
<div class="container mt-4">
    <div class="subject-page">
        <h1>‚öóÔ∏è Physics AI Solver</h1>
        <p class="lead">Solve physics problems with AI assistance - mechanics, thermodynamics, electromagnetism, and more!</p>
        
        <div class="row">
            <div class="col-md-8">
                <!-- Text input section -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5>üìù Type Your Physics Problem</h5>
                    </div>
                    <div class="card-body">
                        <textarea id="textInput" class="form-control mb-3" rows="4" placeholder="Type your physics problem here... (e.g., A 2kg object is pushed with 10N of force. What is its acceleration?)"></textarea>
                        <button onclick="solveTextPhysics()" class="btn btn-primary">
                            <span class="btn-text">Solve Physics Problem</span>
                            <span class="spinner-border spinner-border-sm d-none" role="status"></span>
                        </button>
                    </div>
                </div>
                
                <!-- Image upload section -->
                <div class="card mb-4">
                    <div class="card-header bg-success text-white">
                        <h5>üì∑ Upload Problem Image</h5>
                    </div>
                    <div class="card-body">
                        <input type="file" accept="image/*" capture="environment" id="imageInput" class="form-control mb-3">
                        <button onclick="solveImagePhysics()" class="btn btn-success">
                            <span class="btn-text">Solve from Image</span>
                            <span class="spinner-border spinner-border-sm d-none" role="status"></span>
                        </button>
                    </div>
                </div>
                
                <!-- Results section -->
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h5>üéØ Physics Solutions</h5>
                    </div>
                    <div class="card-body">
                        <div id="output" class="solution-output">
                            Ready to solve your physics problems! Choose an input method above.
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-header">
                        <h6>üìö Physics Formulas</h6>
                    </div>
                    <div class="card-body text-center">
                        <a href="physics-library.html" class="btn btn-primary mb-3" style="width: 100%;">
                            üìñ Advanced Formula Library
                        </a>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">
                        <h6>‚ö° Basic Formulas</h6>
                    </div>
                    <div class="card-body">
                        <h6>Mechanics:</h6>
                        <ul class="list-unstyled">
                            <li><strong>Force:</strong> F = ma</li>
                            <li><strong>Work:</strong> W = Fd</li>
                            <li><strong>Power:</strong> P = W/t</li>
                            <li><strong>Momentum:</strong> p = mv</li>
                            <li><strong>KE:</strong> KE = ¬Ωmv¬≤</li>
                            <li><strong>PE:</strong> PE = mgh</li>
                        </ul>
                        
                        <h6>Electricity:</h6>
                        <ul class="list-unstyled">
                            <li><strong>Ohm's Law:</strong> V = IR</li>
                            <li><strong>Power:</strong> P = IV</li>
                            <li><strong>Energy:</strong> E = Pt</li>
                        </ul>
                        
                        <h6>Waves:</h6>
                        <ul class="list-unstyled">
                            <li><strong>Speed:</strong> v = fŒª</li>
                            <li><strong>Period:</strong> T = 1/f</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h6>üí° Physics Tips</h6>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li>‚Ä¢ Always include units in your answers</li>
                            <li>‚Ä¢ Draw free body diagrams for force problems</li>
                            <li>‚Ä¢ Check if your answer makes physical sense</li>
                            <li>‚Ä¢ Use significant figures appropriately</li>
                            <li>‚Ä¢ Convert units when necessary</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    </main>

    <!-- Scripts -->
    <script src="/public/top/css_file/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/public/top/js_file/static/js/main.js"></script>
    
<script>
// Global variables
let isProcessing = false;

function setButtonLoading(button, loading) {
    const spinner = button.querySelector('.spinner-border');
    const text = button.querySelector('.btn-text');
    
    if (loading) {
        spinner.classList.remove('d-none');
        button.disabled = true;
        if (text) text.textContent = 'Processing...';
    } else {
        spinner.classList.add('d-none');
        button.disabled = false;
        if (text) text.textContent = button.onclick.includes('Text') ? 'Solve Physics Problem' : 'Solve from Image';
    }
}

async function solveTextPhysics() {
    if (isProcessing) return;
    
    const input = document.getElementById('textInput').value.trim();
    const output = document.getElementById('output');
    const button = event.target;
    
    if (!input) {
        alert("Please enter a physics problem!");
        return;
    }
    
    isProcessing = true;
    setButtonLoading(button, true);
    output.innerHTML = '<div class="alert alert-info">üîÑ Solving your physics problem...</div>';
    
    try {
        const response = await fetch("/solve-physics", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ problem: input })
        });
        
        const data = await response.json();
        
        if (response.ok) {
            displaySolutions(data);
        } else {
            output.innerHTML = `<div class="alert alert-danger">‚ùå Error: ${data.error || 'Unknown error occurred'}</div>`;
        }
    } catch (err) {
        console.error('Error:', err);
        output.innerHTML = '<div class="alert alert-danger">‚ùå Network error. Please check your connection.</div>';
    } finally {
        isProcessing = false;
        setButtonLoading(button, false);
    }
}

async function solveImagePhysics() {
    if (isProcessing) return;
    
    const fileInput = document.getElementById('imageInput');
    const output = document.getElementById('output');
    const button = event.target;
    
    if (!fileInput.files[0]) {
        alert("Please select or take a photo!");
        return;
    }
    
    isProcessing = true;
    setButtonLoading(button, true);
    output.innerHTML = '<div class="alert alert-info">üì∑ Extracting text from image...</div>';
    
    try {
        // OCR Processing
        const { data: { text } } = await Tesseract.recognize(fileInput.files[0], 'eng', {
            logger: m => {
                if (m.status === 'recognizing text') {
                    output.innerHTML = `<div class="alert alert-info">üì∑ Processing image... ${Math.round(m.progress * 100)}%</div>`;
                }
            }
        });
        
        if (!text.trim()) {
            output.innerHTML = '<div class="alert alert-warning">‚ö†Ô∏è Could not extract text from image. Try a clearer photo.</div>';
            return;
        }
        
        output.innerHTML = `<div class="alert alert-success">üì∑ Extracted problem: <strong>${text.trim()}</strong></div><div class="alert alert-info">üîÑ Solving physics problem...</div>`;
        
        // Solve the extracted problem
        const response = await fetch("/solve-physics", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ problem: text.trim() })
        });
        
        const data = await response.json();
        
        if (response.ok) {
            displaySolutions(data);
        } else {
            output.innerHTML = `<div class="alert alert-danger">‚ùå Error: ${data.error || 'Unknown error occurred'}</div>`;
        }
        
    } catch (err) {
        console.error('Error:', err);
        output.innerHTML = '<div class="alert alert-danger">‚ùå Error processing image or solving problem.</div>';
    } finally {
        isProcessing = false;
        setButtonLoading(button, false);
    }
}

function displaySolutions(data) {
    const output = document.getElementById('output');
    
    let html = `
        <div class="problem-display mb-4">
            <h5>‚öóÔ∏è Physics Problem:</h5>
            <div class="alert alert-light">${data.problem}</div>
        </div>
        <div class="solutions-display">
            <h5>üéØ AI Physics Solutions:</h5>
    `;
    
    // Gemini Solution
    html += `
        <div class="card mb-3">
            <div class="card-header bg-primary text-white">
                <h6 class="mb-0">üîµ AI Physics Solution</h6>
            </div>
            <div class="card-body">
                <div class="solution-text" style="font-family: Arial, sans-serif;">${data.solutions.gemini}</div>
            </div>
        </div>
    `;
    
    html += '</div>';
    output.innerHTML = html;
}
</script>

</body>
</html>